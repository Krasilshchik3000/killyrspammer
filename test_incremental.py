#!/usr/bin/env python3
"""
–¢–µ—Å—Ç –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
"""

def test_incremental_learning():
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è")
    
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–º–ø—Ç
    current_prompt = """–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —Ç–µ–ª–µ–≥—Ä–∞–º-–≥—Ä—É–ø–ø—ã –∏ –æ—Ç–≤–µ—Ç—å —Å—Ç—Ä–æ–≥–æ –æ–¥–Ω–∏–º –∏–∑ —Ç—Ä—ë—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
–°–ü–ê–ú
–ù–ï_–°–ü–ê–ú
–í–û–ó–ú–û–ñ–ù–û_–°–ü–ê–ú

–°—á–∏—Ç–∞–π –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏: –±–µ–∑–∞–¥—Ä–µ—Å–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏/—Ä–∞–±–æ—Ç—É "–±–µ–∑ –æ–ø—ã—Ç–∞/–≤—ã—Å–æ–∫–∏–π –¥–æ—Ö–æ–¥", –ø—Ä–∏–∑—ã–≤—ã –ø–∏—Å–∞—Ç—å –≤ –õ–°/–±–æ—Ç–∞/–≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏, —Å–µ—Ä–¥–µ—á–∫–∏ üíò/üíù —Å –Ω–∞–º—ë–∫–æ–º –Ω–∞ –∏–Ω—Ç–∏–º-—É—Å–ª—É–≥–∏. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–∞–ª–æ ‚Äî –≤—ã–±–∏—Ä–∞–π –í–û–ó–ú–û–ñ–ù–û_–°–ü–ê–ú.

–°–æ–æ–±—â–µ–Ω–∏–µ: ¬´{message_text}¬ª

–û—Ç–≤–µ—Ç:"""
    
    # –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ ChatGPT —Å –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º
    analysis = """–ê–ù–ê–õ–ò–ó: –ë—ã–ª –Ω–µ—É–≤–µ—Ä–µ–Ω, —Ç–∞–∫ –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–ª–æ —Ç–æ–ª—å–∫–æ –∏–∑ –æ–¥–Ω–æ–≥–æ —ç–º–æ–¥–∑–∏.

–î–û–ü–û–õ–ù–ï–ù–ò–ï_–ö_–ö–†–ò–¢–ï–†–ò–Ø–ú: 6. –°–æ–æ–±—â–µ–Ω–∏—è, —Å–æ—Å—Ç–æ—è—â–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑ —ç–º–æ–¥–∑–∏-—Å–µ—Ä–¥–µ—á–µ–∫ üíò/üíù, –¥–∞–∂–µ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞, —Å—á–∏—Ç–∞–π –°–ü–ê–ú."""
    
    print("üìù –ò—Å—Ö–æ–¥–Ω—ã–π –ø—Ä–æ–º–ø—Ç:")
    print(current_prompt[200:400] + "...")
    
    if "–î–û–ü–û–õ–ù–ï–ù–ò–ï_–ö_–ö–†–ò–¢–ï–†–ò–Ø–ú:" in analysis:
        addition = analysis.split("–î–û–ü–û–õ–ù–ï–ù–ò–ï_–ö_–ö–†–ò–¢–ï–†–ò–Ø–ú:")[1].strip()
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
        current_criteria_start = current_prompt.find("–°—á–∏—Ç–∞–π –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏")
        current_criteria_end = current_prompt.find("–°–æ–æ–±—â–µ–Ω–∏–µ:")
        
        if current_criteria_start != -1 and current_criteria_end != -1:
            existing_criteria = current_prompt[current_criteria_start:current_criteria_end].strip()
            
            # –î–æ–ø–æ–ª–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
            improved_criteria = f"{existing_criteria}\n\n{addition}"
            
            print("\n‚úÖ –î–æ–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏:")
            print(improved_criteria)
            
            # –°–æ–±–∏—Ä–∞–µ–º –ø–æ–ª–Ω—ã–π –ø—Ä–æ–º–ø—Ç
            improved_prompt = f"""–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ —Ç–µ–ª–µ–≥—Ä–∞–º-–≥—Ä—É–ø–ø—ã –∏ –æ—Ç–≤–µ—Ç—å —Å—Ç—Ä–æ–≥–æ –æ–¥–Ω–∏–º –∏–∑ —Ç—Ä—ë—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:
–°–ü–ê–ú
–ù–ï_–°–ü–ê–ú
–í–û–ó–ú–û–ñ–ù–û_–°–ü–ê–ú

{improved_criteria}

–°–æ–æ–±—â–µ–Ω–∏–µ: {{message_text}}

–û—Ç–≤–µ—Ç:"""
            
            print("\nüîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π:")
            if "–±–µ–∑ –æ–ø—ã—Ç–∞/–≤—ã—Å–æ–∫–∏–π –¥–æ—Ö–æ–¥" in improved_prompt:
                print("‚úÖ –°—Ç–∞—Ä—ã–µ –∑–Ω–∞–Ω–∏—è –æ –≤–∞–∫–∞–Ω—Å–∏—è—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")
            else:
                print("‚ùå –ü–æ—Ç–µ—Ä—è–Ω—ã –∑–Ω–∞–Ω–∏—è –æ –≤–∞–∫–∞–Ω—Å–∏—è—Ö")
                
            if "—ç–º–æ–¥–∑–∏-—Å–µ—Ä–¥–µ—á–µ–∫" in improved_prompt:
                print("‚úÖ –ù–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è –æ–± —ç–º–æ–¥–∑–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã")
            else:
                print("‚ùå –ù–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã")

if __name__ == "__main__":
    test_incremental_learning()
